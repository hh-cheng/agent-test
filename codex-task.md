基于当前项目的最新实现，完善并实现以下功能与约束:

## 目标
1. 扩展 TODO List 数据结构，允许一个 TODO 下包含多个子 TODO。
2. 接入 next-auth 并增加登录页，先使用固定账号密码进行登录验证。
3. 增加子 TODO 排序、批量操作与进度展示功能。
4. 增加子 TODO 过滤、搜索与优先级批量设置功能。

## 功能范围与需求细节
### 1) TODO 数据结构扩展
- 一个 TODO 可以拥有 0..N 个子 TODO。
- 子 TODO 与父 TODO 的展示需具备层级关系（例如缩进或视觉分组）。
- 子 TODO 具备与父 TODO 一致的核心字段：`id`、`title`、`completed`、`createdAt`（如当前已有字段，请保持兼容）。
- 子 TODO 需要新增 `priority` 字段（高/中/低），用于批量设置与过滤展示。
- 支持新增/编辑/删除/完成子 TODO。
- 父 TODO 的完成状态与子 TODO 的关系需要明确:
  - 若父 TODO 被标记完成，子 TODO 默认也标记完成。
  - 若所有子 TODO 完成，父 TODO 允许自动完成（如当前项目存在完成状态派生逻辑，请与之对齐）。
- 需要避免破坏现有数据与 UI 行为；若已有存量数据，迁移逻辑需安全。
  - 子 TODO 需支持排序（同一父级下可拖拽调整顺序）。
  - 同一父 TODO 下支持对子 TODO 进行批量完成与批量删除。
  - 父 TODO 显示进度（已完成子项 / 总子项），并在列表中可见。

### 2) 账号登录与权限
- 使用 next-auth 进行登录流程，新增独立登录页（如 `/login`）。
- 固定账号密码:
  - 账号: `todolistusername`
  - 密码: `todolistpwd`
- 登录页包含账号、密码输入与提交按钮，错误时展示明确提示。
- 未登录用户访问核心页面时需要引导到登录页。
- 登录后访问 TODO 功能页，登出后无法访问受保护页面。

## UI/交互要求
- TODO 列表需清晰区分父/子 TODO。
- 子 TODO 的操作入口（新增、完成、删除）需直观可用。
- 子 TODO 拖拽排序需有明确可操作区域（如拖拽把手）。
- 批量操作需有清晰入口（如多选 + 批量按钮）。
- 进度展示需在父 TODO 处可一眼识别（数字或进度条）。
- 提供子 TODO 过滤器（全部/仅未完成/仅已完成）。
- 提供子 TODO 搜索输入框（按标题关键词匹配）。
- 提供子 TODO 批量设置优先级入口（高/中/低）。
- 登录状态在界面上可见（例如显示当前用户或登出按钮）。

## 验收标准
- 可以创建包含多个子 TODO 的父 TODO，并对每个子 TODO 进行完整 CRUD 操作。
- 父/子 TODO 完成状态逻辑符合上述约束。
- 子 TODO 可拖拽排序，排序结果可持久化。
- 子 TODO 支持批量完成与批量删除，并有明确 UI 入口。
- 父 TODO 显示子项完成进度且数据准确。
- 子 TODO 可按完成状态过滤与关键词搜索。
- 子 TODO 支持批量设置优先级，优先级展示清晰可见。
- 未登录用户无法访问 TODO 功能页，登录成功后可正常使用。
- 使用固定账号密码可完成登录；错误凭证会被提示。

## 约束与说明
- 尽量复用现有代码结构与样式，避免大范围重构。
- 若需要新增依赖，请在 PR 说明中解释用途。


# Trigger Comment
> ### 🤖 Gemini 代码审计报告
> @codex address this feedback
> 
> ### 5.1 总结
> * **PR 意图概述**：本次 PR 主要实现了子 TODO 项的优先级设置、状态过滤和标题搜索功能，并对批量操作（如全选、批量设置优先级）的用户体验进行了优化。同时，改进了 GitHub Actions 工作流程，增强了自动化流程的稳定性和鲁棒性。
> * **风险评级**：Medium
> * **是否可合并**：No (存在 1 个 Blocker 项)
> 
> ### 5.2 需求覆盖矩阵 (Product Coverage Matrix)
> * [x]  **功能点 1：子 TODO 新增  字段** - 已实现 (:  类型定义)。
> * [x]  **功能点 2：提供子 TODO 过滤器（全部/仅未完成/仅已完成）** - 已实现 (:  状态与  过滤逻辑)。
> * [x]  **功能点 3：提供子 TODO 搜索输入框** - 已实现 (:  状态与  过滤逻辑)。
> * [x]  **功能点 4：提供子 TODO 批量设置优先级入口** - 已实现 (:  函数与批量操作按钮)。
> * [x]  **功能点 5：优先级与过滤/搜索状态下的 UI/UX 优化** - 已实现 (例如， 按钮、动态的已选计数、无结果提示等)。
> * [x]  **功能点 6：CI/CD 工作流优化** - 已实现 (: 触发器改为  并增加防循环逻辑)。
> 
> ### 5.3 问题清单
> #### Blocker
> * **Severity**: Blocker
> * **Category**: Test
> * **Location**: 
> * **Problem**: PR 引入了多个核心的状态处理函数（如 , ,  等），但完全缺失对应的单元测试。这些函数逻辑复杂，直接影响数据一致性，没有测试覆盖，给未来的代码维护和重构带来了极高的回归风险。
> * **Fix**: 请为  中新增的核心工具函数（尤其是  和与  相关的过滤/搜索逻辑）补充单元测试。可以使用  或  等测试框架。
> * **Acceptance Criteria**:
>   
>   * 新的单元测试文件被创建。
>   * 测试用例覆盖了批量更新优先级的成功场景、边界场景（如空 ID 列表、不存在的 parentId）。
>   * 测试用例覆盖了不同  和  组合下  的计算结果。
>   * 所有测试必须通过。
> 
> #### Minor
> * **Severity**: Minor
> * **Category**: Performance
> * **Location**:  (  组件内部)
> * **Problem**:  数组在  组件的每次渲染时都会被重新计算。当一个父 TODO 下有大量子 TODO 时，频繁的  操作（例如，在搜索框中输入时）可能会引发不必要的性能开销，导致 UI 卡顿。
> * **Fix**: 建议使用  来缓存  的计算结果。它仅在依赖项（, , ）发生变化时才重新计算。
>   
> * **Acceptance Criteria**:
>   
>   * 代码被重构， 的计算被  包裹。
>   * 在 UI 上反复切换过滤条件或在搜索框输入时，功能表现与之前一致。
> 
> #### Suggestion
> * **Severity**: Suggestion
> * **Category**: DX (Developer Experience) / Code Quality
> * **Location**: 
> * **Problem**: 在  中重置  的逻辑是合理的，但依赖项数组中包含了  和 。这意味着每次在搜索框输入一个字符， 都会被触发一次，从而调用 。虽然 React 会进行优化，但这仍是不必要的重复状态设置。
>   
> * **Fix**: 建议将这个  的触发时机与过滤/搜索逻辑解耦，改为在处理过滤和搜索的事件回调函数中直接调用 。这样可以更精确地控制状态重置，仅在用户“提交”一个完整的过滤/搜索动作时清空选择。或者，可以保持现有逻辑，因为它对用户体验影响极小，但从代码精确性的角度出发，前者更优。
> * **Acceptance Criteria**:
>   
>   * 当切换过滤条件或清空搜索词时，已勾选的子项被清空。
>   * 在搜索框中连续输入时， 不再被频繁调用。
> 
> ### 5.4 建议的回归测试清单
> * **必跑命令**:
>   
>   * 
>   * 
>   * 
>   * 
>   *  (在补充测试后)
> * **建议增加的手动测试用例**:
>   
>   1. **优先级功能**：
>      
>      * [ ]  为单个父 TODO 设置优先级，验证其徽章颜色和文本是否正确更新。
>      * [ ]  选中多个子 TODO，批量设置为“高优先级”，验证所有选中的子 TODO 徽章都已更新。
>      * [ ]  创建一个新的父/子 TODO，验证其默认优先级为“中”。
>   2. **过滤与搜索功能**：
>      
>      * [ ]  创建多个已完成和未完成的子 TODO。
>      * [ ]  点击“仅未完成”过滤器，验证列表是否只显示未完成的子 TODO。
>      * [ ]  在搜索框输入一个存在于某个子 TODO 标题中的关键词，验证列表是否只显示匹配的项。
>      * [ ]  在过滤和搜索同时生效时，验证列表显示的是二者条件的交集。
>      * [ ]  当过滤/搜索结果为空时，验证是否显示“无匹配”的提示信息。
>   3. **批量操作与过滤器/搜索的交互**：
>      
>      * [ ]  切换到“仅未完成”视图。
>      * [ ]  点击“全选(当前筛选)”按钮，验证是否只选中了所有“未完成”的子 TODO。
>      * [ ]  执行批量删除操作，验证是否只有选中的项被删除，而已完成的项不受影响。
>      * [ ]  切换过滤器或输入搜索词后，验证之前的勾选状态是否被正确清空。

@codex address this feedback
